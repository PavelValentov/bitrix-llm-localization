# Правила нормализации локализации

Эти правила применяются при объединении, заполнении пробелов и переводе, чтобы единообразно обрабатывать пустые и пробельные значения.

## Ключи без реального перевода → один пробел

**Правило:** Если у ключа **все** значения по языкам отсутствуют (null, пустая строка или только пробелы), либо **одно** значение — один пробел `" "`, а остальные отсутствуют, то для этого ключа **все** языковые слоты устанавливаются в один пробел `" "`.

**Примеры:**

| До | После |
|----|--------|
| `en: null, ru: null, tr: null, ua: null` | `en: " ", ru: " ", tr: " ", ua: " "` |
| `en: null, ru: " ", tr: null, ua: null` | `en: " ", ru: " ", tr: " ", ua: " "` |

**Где применяется:**

- **unite-localization** — после слияния и `fillMissingLangs`, перед опциональным fill-gaps.
- **fill-gaps** (CLI и вызов из других скриптов) — первый проход перед копированием из доноров и uniform fill.
- **translate** — при загрузке JSON и после fill-gaps при перезагрузке модели.

**Зачем:** Единообразный вид ключей без перевода и совместимость с экспортом/импортом Bitrix24 (избегаем смеси null и `" "`).

## Слияние и пустые значения (§4.6)

При объединении PHP и JSON в `unite-localization`:

- Пустая строка или отсутствующее значение считаются «нет перевода».
- Значение из одного только пробелов считается переводом и может быть заменено непустым из другого источника.
- Непустое значение не перезаписывается из другого файла.

Подробности — в коде `scripts/unite-localization.ts` (комментарии §4.6).
